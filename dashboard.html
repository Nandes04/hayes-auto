<!DOCTYPE html>
<html lang="pt-PT">
<head>
<meta charset="UTF-8">
<title>Hayes Auto - Painel</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#111;
    color:white;
}

/* MENU */
nav{
    background:#000;
    padding:18px;
    display:flex;
    justify-content:center;
    gap:50px;
}

nav a{
    color:white;
    text-decoration:none;
    font-weight:bold;
    cursor:pointer;
}

nav a:hover{
    color:#2563eb;
}

/* CONTE√öDO */
.tab{
    display:none;
    padding:50px;
    text-align:center;
}

.tab.active{
    display:block;
}

/* BOT√ÉO SAIR */
.logout{
    position:absolute;
    top:15px;
    right:20px;
    background:#2563eb;
    padding:8px 15px;
    border-radius:6px;
    cursor:pointer;
}

/* BOT√ÉO COPIAR JSON */
.copy-json{
    margin-top:15px;
    background:#2563eb;
    padding:8px 12px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    color:white;
}
</style>
</head>

<body>

<div class="logout" onclick="logout()">Sair</div>

<nav>
  <a onclick="showTab('inicio')">In√≠cio</a>
  <a onclick="showTab('servicos')">Servi√ßos</a>
  <a onclick="showTab('stock')">Stock</a>
  <a id="bossTab" onclick="showTab('boss')">Boss</a>
</nav>

<div id="inicio" class="tab active">
  <h1>Bem-vindo √† Hayes Auto üöó</h1>
  <p>Painel principal da oficina.</p>
</div>

<div id="servicos" class="tab">
  <h1>Servi√ßos</h1>
  <p>Aqui vais colocar os servi√ßos da oficina.</p>
</div>

<div id="stock" class="tab">
  <h1>Stock</h1>
  <p>Lista de pe√ßas e materiais.</p>
</div>

<div id="boss" class="tab">
  <h1>Painel do Boss üëë</h1>

  <h3>Criar Novo Utilizador</h3>

  <input id="newUser" placeholder="Nome do utilizador">
  <input id="newPass" placeholder="Senha">
  
  <select id="newRole">
    <option value="staff">Mec√¢nico</option>
    <option value="admin">Patr√£o</option>
  </select>

  <button onclick="createUser()">Criar Conta</button>

  <h3 style="margin-top:40px;">Utilizadores Existentes</h3>
  <div id="userList"></div>

  <button class="copy-json" onclick="copyJSON()">Copiar JSON para atualizar Gist</button>
</div>

<script>
// üîπ TROCA DE ABAS
function showTab(tabId){
    document.querySelectorAll(".tab").forEach(tab=>{
        tab.classList.remove("active");
    });
    document.getElementById(tabId).classList.add("active");
}

// üîπ LOGOUT
function logout(){
    localStorage.removeItem("user");
    localStorage.removeItem("role");
    window.location.href = "index.html";
}

// üîπ PROTE√á√ÉO
if(!localStorage.getItem("user")){
    window.location.href = "index.html";
}

// üîπ ESCONDER BOSS SE N√ÉO FOR ADMIN
if(localStorage.getItem("role") !== "admin"){
    document.getElementById("bossTab").style.display = "none";
}

// üîπ UTILIZADORES (JSON local)
let users = JSON.parse(localStorage.getItem("users")) || [
    {user:"patrao", pass:"1234", role:"admin"}
];

// üîπ FUN√á√ÉO CRIAR UTILIZADOR
function createUser(){
    const user = document.getElementById("newUser").value.trim();
    const pass = document.getElementById("newPass").value.trim();
    const role = document.getElementById("newRole").value;

    if(!user || !pass){
        alert("Preenche todos os campos ‚ùå");
        return;
    }

    if(users.find(u=>u.user===user)){
        alert("Esse utilizador j√° existe ‚ùå");
        return;
    }

    users.push({user, pass, role});
    localStorage.setItem("users", JSON.stringify(users));

    document.getElementById("newUser").value = "";
    document.getElementById("newPass").value = "";

    renderUsers();
}

// üîπ MOSTRAR UTILIZADORES
function renderUsers(){
    const container = document.getElementById("userList");
    container.innerHTML = "";
    users.forEach(u=>{
        container.innerHTML += `
        <div style="margin:8px 0; background:#222; padding:10px; border-radius:6px;">
            ${u.user} (${u.role})
        </div>`;
    });
}

// üîπ COPIAR JSON PARA GIST
function copyJSON(){
    const json = JSON.stringify(users, null, 2);
    navigator.clipboard.writeText(json)
        .then(()=>alert("JSON copiado ‚úÖ Agora cola no Gist"))
        .catch(()=>alert("Erro a copiar JSON ‚ùå"));
}

// Carregar lista ao abrir
renderUsers();
</script>

</body>
</html>
