<!DOCTYPE html>
<html lang="pt-PT">
<head>
<meta charset="UTF-8">
<title>Hayes Auto</title>
<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#0f172a;
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}
.box{
    background:#1e293b;
    padding:30px;
    border-radius:12px;
    width:320px;
    box-shadow:0 0 20px rgba(0,0,0,.5);
}
input,select,button{
    width:100%;
    padding:10px;
    margin-top:10px;
    border-radius:6px;
    border:none;
}
button{
    background:#2563eb;
    color:white;
    cursor:pointer;
}
button:hover{opacity:.8}
.hidden{display:none}
.panel{
    width:90%;
    max-width:900px;
}
table{
    width:100%;
    border-collapse:collapse;
}
td,th{
    padding:8px;
    border-bottom:1px solid #334155;
}
.adminOnly{display:none}
</style>
</head>
<body>

<div class="box" id="loginBox">
<h2>Hayes Auto</h2>
<input id="user" placeholder="Utilizador">
<input id="pass" type="password" placeholder="Senha">
<button onclick="login()">Entrar</button>
<p id="msg"></p>
</div>

<div class="panel hidden" id="panel">
<h2 id="welcome"></h2>

<h3>Serviços</h3>
<input id="serviceName" placeholder="Serviço feito">
<input id="serviceCost" placeholder="Valor €">
<button onclick="addService()">Registar serviço</button>

<table id="servicesTable">
<tr><th>Serviço</th><th>€</th><th>Por</th></tr>
</table>

<h3>Stock</h3>
<table>
<tr><th>Peça</th><th>Quantidade</th><th class="adminOnly">Editar</th></tr>
<tr>
<td>Filtro de ar</td>
<td id="s1">10</td>
<td class="adminOnly"><button onclick="changeStock('s1')">Alterar</button></td>
</tr>
<tr>
<td>Óleo motor</td>
<td id="s2">15</td>
<td class="adminOnly"><button onclick="changeStock('s2')">Alterar</button></td>
</tr>
</table>

<button onclick="logout()">Sair</button>
</div>

<script>
const users=[
{u:"patrao",p:"1234",role:"admin"},
{u:"mecanico",p:"1111",role:"mec"}
]

let currentUser=null

function login(){
let u=user.value
let p=pass.value
let found=users.find(x=>x.u===u && x.p===p)
if(!found){msg.innerText="Login inválido";return}
currentUser=found
loginBox.classList.add("hidden")
panel.classList.remove("hidden")
welcome.innerText="Bem-vindo "+u+" ("+found.role+")"

if(found.role==="admin"){
document.querySelectorAll(".adminOnly").forEach(e=>e.style.display="table-cell")
}
}

function logout(){
location.reload()
}

function addService(){
let name=serviceName.value
let cost=serviceCost.value
if(!name||!cost)return
let row=servicesTable.insertRow()
row.insertCell(0).innerText=name
row.insertCell(1).innerText=cost+"€"
row.insertCell(2).innerText=currentUser.u
}

function changeStock(id){
let v=prompt("Nova quantidade:")
if(v!==null) document.getElementById(id).innerText=v
}
</script>
</body>
</html>
